<app-spinner *ngIf="loading != false"></app-spinner>
<div *ngIf="Tasks?.length == 0 && loading == false" class="form">
  <mdb-card>
    <mdb-card-header class="info-color white-text text-center py-4">
      <h5>
        <strong>No Task !</strong>
      </h5>
    </mdb-card-header>

    <mdb-card-body class="px-lg-5 pt-0 errorBody">
      <h3 style="padding: 20px">Nothing to do ! (for now)</h3>
      <h4 style="padding: 20px">
        Either you finished everything or you don't have anything to do yet !
      </h4>
      <img class="errorimg" src="../../../assets/thumbup.png" />
      <button
        style="margin-top: 30px"
        type="button"
        mdbBtn
        mdbWavesEffect
        color="primary"
        routerLink="/tasks/add"
      >
        <a
          class="nav-link waves-light"
          style="color: white"
          mdbWavesEffect
          >Add Task<span class="sr-only">(current)</span></a
        >
      </button>
    </mdb-card-body>
  </mdb-card>
</div>

<table *ngIf="Tasks.length != 0 && loading == false" class="table" mdbTable>
  <thead style="text-align: center" class="tablehead">
    <tr>
      <th class="id" scope="col">ID</th>
      <th scope="col">Description</th>
      <th (click)="sortByCompleted(Tasks)" style="cursor: pointer" scope="col">
        Status
      </th>
      <th (click)="sortByImportance(Tasks)" style="cursor: pointer" scope="col">
        Importance
      </th>
      <th scope="col">Edit</th>
      <th scope="col">Remove</th>
    </tr>
  </thead>
  <tbody style="text-align: center" class="tablebody">
    <tr
      [ngClass]="{ complete: el.completed, important: el.importance }"
      mdbTableCol
      *ngFor="let el of Tasks; let index = index"
    >
      <th class="id" scope="row">{{ index + 1 }}</th>
      <td class="description">{{ el.description }}</td>
      <td style="text-align: center; padding-left: 40px">
        <mdb-checkbox
          (change)="completeFlag(el)"
          [checked]="el.completed"
        ></mdb-checkbox>
      </td>
      <td style="text-align: center; padding-left: 40px">
        <mdb-checkbox
          (change)="importanceFlag(el)"
          [checked]="el.importance"
        ></mdb-checkbox>
      </td>
      <td>
        <button>
          <mdb-icon
            class="icon"
            fas
            icon="edit"
            class="icon"
            [routerLink]="['/tasks', el.taskId, 'edit']"
          ></mdb-icon>
        </button>
      </td>
      <td>
        <button (click)="basicModal.show()">
          <mdb-icon class="icon" fas icon="trash"></mdb-icon>
        </button>
        <div
          mdbModal
          #basicModal="mdbModal"
          class="modal fade"
          tabindex="-1"
          role="dialog"
          aria-labelledby="myBasicModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button
                  type="button"
                  class="close pull-right"
                  aria-label="Close"
                  (click)="basicModal.hide()"
                >
                  <span aria-hidden="true">Ã—</span>
                </button>
                <h4
                  style="color: black"
                  class="modal-title w-100"
                  id="myModalLabel"
                >
                  Are you sure ?
                </h4>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  mdbBtn
                  color="secondary"
                  class="waves-light"
                  aria-label="Close"
                  (click)="basicModal.hide()"
                  mdbWavesEffect
                >
                  Close
                </button>
                <button
                  type="button"
                  mdbBtn
                  color="primary"
                  class="relative waves-light"
                  mdbWavesEffect
                  (click)="deleteTask(el)"
                >
                  Yes
                </button>
              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>
  </tbody>
</table>
